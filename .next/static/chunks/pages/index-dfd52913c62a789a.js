(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{7276:(e,r,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6993)}])},6993:(e,r,n)=>{"use strict";let t;n.r(r),n.d(r,{default:()=>b});var o=n(4848),s=n(5703),a=n.n(s),i=n(6540),d=n(4787),l=n(4953);let c=n.n(l)()(n.e(553).then(n.bind(n,8553)),{loadableGenerated:{webpack:()=>[8553]},ssr:!1});function b(){let[e,r]=(0,i.useState)([]),[n,s]=(0,i.useState)("index.html"),[l,b]=(0,i.useState)(""),[u,p]=(0,i.useState)(""),[x,f]=(0,i.useState)(!1),[m,g]=(0,i.useState)({}),h=(0,i.useRef)(null),j=(0,i.useRef)(null),[v,y]=(0,i.useState)(!1),[N,C]=(0,i.useState)(""),[k,S]=(0,i.useState)([]);function R(e){let r=h.current,t=j.current;if(!r||!t)return;let o=[];for(let r in e){let s=e[r];s.file===n&&s.cursor&&o.push({range:new t.Range(s.cursor.lineNumber,s.cursor.column,s.cursor.lineNumber,s.cursor.column),options:{className:"foreign-cursor",hoverMessage:{value:"**".concat(s.name,"**")},beforeContentClassName:"foreign-cursor-marker"}})}S(r.deltaDecorations(k,o))}return(0,i.useEffect)(()=>((t=(0,d.Ay)({path:"/api/socketio"})).on("init",e=>{let{files:n,content:t,file:o,cursors:a}=e;r(n),b(t),s(o),g(a),R(a)}),t.on("editor-change",e=>{let{file:r,code:t}=e;r===n&&b(t)}),t.on("file-content",e=>{let{file:r,content:n}=e;s(r),b(n)}),t.on("cursor-update",e=>{g(e),R(e)}),t.on("file-created",e=>{r(r=>[...r,e])}),()=>{t.disconnect()}),[n]),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"#1e1e1e",color:"#ffffff"},className:"jsx-d4e0b1504ddb7cbb",children:[!x&&(0,o.jsxs)("div",{style:{margin:"auto",textAlign:"center"},className:"jsx-d4e0b1504ddb7cbb",children:[(0,o.jsx)("h2",{className:"jsx-d4e0b1504ddb7cbb",children:"Enter your name to join"}),(0,o.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"Your Name",style:{padding:"10px",margin:"10px",borderRadius:"5px",border:"1px solid #ccc"},className:"jsx-d4e0b1504ddb7cbb"}),(0,o.jsx)("button",{onClick:function(){if(!u.trim()){alert("Please enter a valid name.");return}t.emit("join",{name:u}),f(!0)},style:{padding:"10px 20px",borderRadius:"5px",border:"none",backgroundColor:"#4CAF50",color:"#fff",cursor:"pointer"},className:"jsx-d4e0b1504ddb7cbb",children:"Join"})]}),x&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",padding:"10px",background:"#2d2d2d",alignItems:"center"},className:"jsx-d4e0b1504ddb7cbb",children:[(0,o.jsx)("select",{value:n,onChange:function(e){let r=e.target.value;s(r),t.emit("change-file",r)},style:{padding:"5px",marginRight:"10px",borderRadius:"5px",border:"1px solid #555",backgroundColor:"#3c3c3c",color:"#fff"},className:"jsx-d4e0b1504ddb7cbb",children:e.map(e=>(0,o.jsx)("option",{value:e,className:"jsx-d4e0b1504ddb7cbb",children:e},e))}),(0,o.jsx)("button",{onClick:()=>y(!0),style:{padding:"5px 10px",borderRadius:"5px",border:"none",backgroundColor:"#007acc",color:"#fff",cursor:"pointer"},className:"jsx-d4e0b1504ddb7cbb",children:"+ New File"})]}),v&&(0,o.jsx)("div",{style:{padding:"10px",background:"#2d2d2d",display:"flex",alignItems:"center"},className:"jsx-d4e0b1504ddb7cbb",children:(0,o.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),!N.trim()){alert("Please enter a valid filename.");return}t.emit("create-file",N,e=>{e.success?(C(""),y(!1),s(N),t.emit("change-file",N)):alert(e.message)})},style:{display:"flex",alignItems:"center"},className:"jsx-d4e0b1504ddb7cbb",children:[(0,o.jsx)("input",{type:"text",value:N,onChange:e=>C(e.target.value),placeholder:"Filename with extension (e.g., app.js)",style:{padding:"5px",marginRight:"10px",borderRadius:"5px",border:"1px solid #555",backgroundColor:"#3c3c3c",color:"#fff"},required:!0,className:"jsx-d4e0b1504ddb7cbb"}),(0,o.jsx)("button",{type:"submit",style:{padding:"5px 10px",borderRadius:"5px",border:"none",backgroundColor:"#28a745",color:"#fff",cursor:"pointer",marginRight:"10px"},className:"jsx-d4e0b1504ddb7cbb",children:"Create"}),(0,o.jsx)("button",{type:"button",onClick:()=>{y(!1),C("")},style:{padding:"5px 10px",borderRadius:"5px",border:"none",backgroundColor:"#dc3545",color:"#fff",cursor:"pointer"},className:"jsx-d4e0b1504ddb7cbb",children:"Cancel"})]})}),(0,o.jsx)("div",{style:{flex:1,position:"relative"},className:"jsx-d4e0b1504ddb7cbb",children:(0,o.jsx)(c,{height:"100%",language:n.endsWith(".html")?"html":n.endsWith(".css")?"css":n.endsWith(".jsx")?"javascript":n.endsWith(".tsx")||n.endsWith(".ts")?"typescript":(n.endsWith(".js"),"javascript"),theme:"vs-dark",value:l,onChange:function(e){b(e),t.emit("editor-change",{file:n,code:e})},onMount:function(e,r){h.current=e,j.current=r,e.onDidChangeCursorPosition(e=>{t.emit("cursor-move",e.position)})},options:{automaticLayout:!0,minimap:{enabled:!1},formatOnType:!0,formatOnPaste:!0,wordWrap:"on",fontSize:14,scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8},cursorStyle:"line",fontFamily:"Fira Code, monospace"}})})]}),(0,o.jsx)(a(),{id:"d4e0b1504ddb7cbb",children:'.foreign-cursor{border-left:2px solid#f00;position:relative}.foreign-cursor-marker{content:"";border-left:2px solid#f00;position:absolute;height:100%;pointer-events:none}.monaco-editor .cursor-tooltip{display:none}'})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[989,636,593,792],()=>r(7276)),_N_E=e.O()}]);