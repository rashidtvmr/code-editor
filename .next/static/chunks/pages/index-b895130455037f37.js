(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{7276:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(6993)}])},6993:(e,r,t)=>{"use strict";let n;t.r(r),t.d(r,{default:()=>f});var o=t(4848),a=t(5703),s=t.n(a),i=t(6540),l=t(4787),c=t(4953);let d=t.n(c)()(t.e(553).then(t.bind(t,8553)),{loadableGenerated:{webpack:()=>[8553]},ssr:!1});function f(){let[e,r]=(0,i.useState)([]),[t,a]=(0,i.useState)("index.html"),[c,f]=(0,i.useState)(""),[u,p]=(0,i.useState)(""),[x,b]=(0,i.useState)(!1),[m,g]=(0,i.useState)({}),h=(0,i.useRef)(null),j=(0,i.useRef)(null),[v,y]=(0,i.useState)(!1),[N,k]=(0,i.useState)(""),[C,w]=(0,i.useState)([]);function S(e){let r=h.current,n=j.current;if(!r||!n)return;let o=[];for(let r in e){let a=e[r];a.file===t&&a.cursor&&o.push({range:new n.Range(a.cursor.lineNumber,a.cursor.column,a.cursor.lineNumber,a.cursor.column),options:{className:"foreign-cursor",hoverMessage:{value:"**".concat(a.name,"**")},beforeContentClassName:"foreign-cursor-marker"}})}w(r.deltaDecorations(C,o))}return(0,i.useEffect)(()=>((n=(0,l.Ay)({path:"/api/socketio"})).on("connect",()=>{console.log("Connected to Socket.io server")}),n.on("init",e=>{let{files:t,content:n,file:o,cursors:s}=e;r(t),f(n),a(o),g(s),S(s)}),n.on("editor-change",e=>{let{file:r,code:n}=e;r===t&&f(n)}),n.on("file-content",e=>{let{file:r,content:t}=e;a(r),f(t)}),n.on("cursor-update",e=>{g(e),S(e)}),n.on("file-created",e=>{r(r=>[...r,e])}),()=>{n.disconnect()}),[t]),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"#1e1e1e",color:"#ffffff"},className:"jsx-48f2a9bfbf5401e8",children:[!x&&(0,o.jsxs)("div",{style:{margin:"auto",textAlign:"center"},className:"jsx-48f2a9bfbf5401e8",children:[(0,o.jsx)("h2",{className:"jsx-48f2a9bfbf5401e8",children:"Enter your name to join"}),(0,o.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"Your Name",style:{padding:"10px",margin:"10px",borderRadius:"5px",border:"1px solid #ccc",width:"200px"},className:"jsx-48f2a9bfbf5401e8"}),(0,o.jsx)("button",{onClick:function(){if(!u.trim()){alert("Please enter a valid name.");return}n.emit("join",{name:u}),b(!0)},style:{padding:"10px 20px",borderRadius:"5px",border:"none",backgroundColor:"#4CAF50",color:"#fff",cursor:"pointer"},className:"jsx-48f2a9bfbf5401e8",children:"Join"})]}),x&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",padding:"10px",background:"#2d2d2d",alignItems:"center"},className:"jsx-48f2a9bfbf5401e8",children:[(0,o.jsx)("select",{value:t,onChange:function(e){let r=e.target.value;a(r),n.emit("change-file",r)},style:{padding:"5px",marginRight:"10px",borderRadius:"5px",border:"1px solid #555",backgroundColor:"#3c3c3c",color:"#fff"},className:"jsx-48f2a9bfbf5401e8",children:e.map(e=>(0,o.jsx)("option",{value:e,className:"jsx-48f2a9bfbf5401e8",children:e},e))}),(0,o.jsx)("button",{onClick:()=>y(!0),style:{padding:"5px 10px",borderRadius:"5px",border:"none",backgroundColor:"#007acc",color:"#fff",cursor:"pointer"},className:"jsx-48f2a9bfbf5401e8",children:"+ New File"})]}),v&&(0,o.jsx)("div",{style:{padding:"10px",background:"#2d2d2d",display:"flex",alignItems:"center"},className:"jsx-48f2a9bfbf5401e8",children:(0,o.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),!N.trim()){alert("Please enter a valid filename.");return}n.emit("create-file",N,e=>{e.success?(k(""),y(!1),a(N),n.emit("change-file",N)):alert(e.message)})},style:{display:"flex",alignItems:"center",width:"100%"},className:"jsx-48f2a9bfbf5401e8",children:[(0,o.jsx)("input",{type:"text",value:N,onChange:e=>k(e.target.value),placeholder:"Filename with extension (e.g., app.js)",style:{padding:"5px",marginRight:"10px",borderRadius:"5px",border:"1px solid #555",backgroundColor:"#3c3c3c",color:"#fff",flex:1},required:!0,className:"jsx-48f2a9bfbf5401e8"}),(0,o.jsx)("button",{type:"submit",style:{padding:"5px 10px",borderRadius:"5px",border:"none",backgroundColor:"#28a745",color:"#fff",cursor:"pointer",marginRight:"10px"},className:"jsx-48f2a9bfbf5401e8",children:"Create"}),(0,o.jsx)("button",{type:"button",onClick:()=>{y(!1),k("")},style:{padding:"5px 10px",borderRadius:"5px",border:"none",backgroundColor:"#dc3545",color:"#fff",cursor:"pointer"},className:"jsx-48f2a9bfbf5401e8",children:"Cancel"})]})}),(0,o.jsx)("div",{style:{flex:1,position:"relative"},className:"jsx-48f2a9bfbf5401e8",children:(0,o.jsx)(d,{height:"100%",language:t.endsWith(".html")?"html":t.endsWith(".css")?"css":t.endsWith(".jsx")?"javascript":t.endsWith(".tsx")||t.endsWith(".ts")?"typescript":(t.endsWith(".js"),"javascript"),theme:"vs-dark",value:c,onChange:function(e){f(e),n.emit("editor-change",{file:t,code:e})},onMount:function(e,r){h.current=e,j.current=r,e.onDidChangeCursorPosition(e=>{n.emit("cursor-move",e.position)})},options:{automaticLayout:!0,minimap:{enabled:!1},formatOnType:!0,formatOnPaste:!0,wordWrap:"on",fontSize:14,scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8},cursorStyle:"line",fontFamily:"Fira Code, monospace"}})})]}),(0,o.jsx)(s(),{id:"48f2a9bfbf5401e8",children:'.foreign-cursor{border-left:2px solid#f00;position:relative}.foreign-cursor-marker{content:"";border-left:2px solid#f00;position:absolute;height:100%;pointer-events:none}.foreign-cursor:hover::after{content:attr(data-tooltip);position:absolute;top:-25px;left:0;background:rgba(0,0,0,.75);color:#fff;padding:3px 8px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;pointer-events:none;font-size:12px;-webkit-transform:translatex(-50%);-moz-transform:translatex(-50%);-ms-transform:translatex(-50%);-o-transform:translatex(-50%);transform:translatex(-50%);z-index:1000}.monaco-editor .cursor-tooltip{display:none}'})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[989,636,593,792],()=>r(7276)),_N_E=e.O()}]);